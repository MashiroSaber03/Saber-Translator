import{a as r}from"./utils-vendor.B9ygI19o.js";function o(n){const e=n.response,s=e?.data;return{code:s?.code||n.code||"UNKNOWN_ERROR",message:s?.error||s?.message||n.message,status:e?.status||500,details:s?.details}}class i{instance;constructor(){this.instance=r.create({baseURL:"",timeout:3e5,headers:{"Content-Type":"application/json"}}),this.instance.interceptors.request.use(e=>e,e=>Promise.reject(e)),this.instance.interceptors.response.use(e=>e,e=>{const s=o(e);return console.error("API 错误:",s),Promise.reject(s)})}async get(e,s){return(await this.instance.get(e,s)).data}async post(e,s,t){return(await this.instance.post(e,s,t)).data}async put(e,s,t){return(await this.instance.put(e,s,t)).data}async delete(e,s){return(await this.instance.delete(e,s)).data}async upload(e,s,t){return(await this.instance.post(e,s,{...t,headers:{...t?.headers,"Content-Type":"multipart/form-data"}})).data}getAxiosInstance(){return this.instance}}const p=new i;export{p as apiClient,p as default};
