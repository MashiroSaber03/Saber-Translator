import{a as S,r as f,c as r,l as z,o as $,i as n,n as g,e as a,b as M,t as p,v as N,x as D,F as h,j as k,g as F,h as l}from"./vue-vendor.DDJbHApa.js";const j=["title"],G={class:"custom-select-value",style:{color:"#1f2430"}},P={class:"custom-select-options"},T={class:"custom-select-group-label"},U=["onClick"],W=["onClick"],H=S({__name:"CustomSelect",props:{modelValue:{type:[String,Number,Boolean]},options:{default:()=>[]},groups:{default:()=>[]},placeholder:{default:"请选择"},disabled:{type:Boolean,default:!1},title:{default:""}},emits:["update:modelValue","change"],setup(c,{emit:x}){const t=c,y=x,s=f(!1),u=f(null),m=f(null),w=f({}),b=r(()=>t.groups&&t.groups.length>0),B=r(()=>t.groups),E=r(()=>t.options),L=r(()=>b.value?t.groups.flatMap(e=>e.options):t.options),O=r(()=>{const e=L.value.find(v=>v.value===t.modelValue);return e?e.label:t.placeholder});function R(){t.disabled||(s.value?s.value=!1:(C(),s.value=!0))}function C(){if(u.value){const e=u.value.getBoundingClientRect();w.value={top:`${e.bottom+4}px`,left:`${e.left}px`,width:`${e.width}px`,minWidth:"160px"}}}function _(e){y("update:modelValue",e),y("change",e),s.value=!1}function V(e){u.value&&u.value.contains(e.target)||m.value&&m.value.contains(e.target)||(s.value=!1)}function d(){s.value&&C()}return z(()=>{document.addEventListener("click",V),window.addEventListener("scroll",d,!0),window.addEventListener("resize",d)}),$(()=>{document.removeEventListener("click",V),window.removeEventListener("scroll",d,!0),window.removeEventListener("resize",d)}),(e,v)=>(l(),n("div",{class:g(["custom-select",{open:s.value,disabled:c.disabled}]),ref_key:"selectRef",ref:u,style:{color:"#1f2430"}},[a("div",{class:"custom-select-trigger",onClick:R,title:c.title,style:{background:"#fff",color:"#1f2430"}},[a("span",G,p(O.value),1),v[0]||(v[0]=a("span",{class:"custom-select-arrow",style:{color:"#666"}},[a("svg",{viewBox:"0 0 12 12",width:"12",height:"12"},[a("path",{d:"M2 4l4 4 4-4",stroke:"currentColor","stroke-width":"1.5",fill:"none"})])],-1))],8,j),(l(),M(F,{to:"body"},[s.value?(l(),n("div",{key:0,ref_key:"dropdownRef",ref:m,class:"custom-select-dropdown",style:D(w.value)},[a("div",P,[b.value?(l(!0),n(h,{key:0},k(B.value,o=>(l(),n("div",{key:o.label,class:"custom-select-group"},[a("div",T,p(o.label),1),(l(!0),n(h,null,k(o.options,i=>(l(),n("div",{key:i.value,class:g(["custom-select-option",{selected:i.value===c.modelValue}]),onClick:q=>_(i.value)},p(i.label),11,U))),128))]))),128)):(l(!0),n(h,{key:1},k(E.value,o=>(l(),n("div",{key:o.value,class:g(["custom-select-option",{selected:o.value===c.modelValue}]),onClick:i=>_(o.value)},p(o.label),11,W))),128))])],4)):N("",!0)]))],2))}});export{H as _};
